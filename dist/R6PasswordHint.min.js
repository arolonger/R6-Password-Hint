"use strict";var _createClass=function(){function l(e,t){for(var s=0;s<t.length;s++){var l=t[s];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(e,t,s){return t&&l(e.prototype,t),s&&l(e,s),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var R6PasswordHint=function(){function t(e){_classCallCheck(this,t),this.builtInRules=["smallLetter","bigLetter","digit","lengthBetween"],this.inputField=e.inputField,this.hintScope=document.getElementById("R6PasswordHint-"+this.inputField.id),this.selectedRulesState=this._rulesSelectedByUser(e.rules),this.domElements=this._getDomElements(),this._isValid=!1,this._addEventListener()}return _createClass(t,[{key:"_getDomElements",value:function(){var e={};for(var t in this.selectedRulesState)e[t]=this.hintScope.querySelector(".js-R6PasswordHint-"+t);return e}},{key:"_rulesSelectedByUser",value:function(t){var s={};return this.builtInRules.forEach(function(e){void 0!==t[e]&&(s[e]={counter:0,shouldBe:t[e]})}),s}},{key:"_addEventListener",value:function(){this.inputField.addEventListener("keyup",this._inputChanged.bind(this))}},{key:"_inputChanged",value:function(){this._refreshState(),this._isConditionsFulfilled()}},{key:"_refreshSmallLetterRuleState",value:function(e){var t=e.match(/[a-z]/g),s=null!==t?t.length:0;this.selectedRulesState.smallLetter.counter=s}},{key:"_refreshBigLetterRuleState",value:function(e){var t=e.match(/[A-Z]/g),s=null!==t?t.length:0;this.selectedRulesState.bigLetter.counter=s}},{key:"_refreshDigitLetterRuleState",value:function(e){var t=e.match(/[0-9]/g),s=null!==t?t.length:0;this.selectedRulesState.digit.counter=s}},{key:"_refreshLengthBetweenRuleState",value:function(e){var t=""!==e?e.length:0;this.selectedRulesState.lengthBetween.counter=t}},{key:"_refreshState",value:function(){var e=this.inputField.value;this.selectedRulesState.smallLetter&&this._refreshSmallLetterRuleState(e),this.selectedRulesState.bigLetter&&this._refreshBigLetterRuleState(e),this.selectedRulesState.digit&&this._refreshDigitLetterRuleState(e),this.selectedRulesState.lengthBetween&&this._refreshLengthBetweenRuleState(e)}},{key:"_isConditionsFulfilled",value:function(){var e=0,t=Object.keys(this.selectedRulesState).length;for(var s in this.selectedRulesState)"lengthBetween"===s?this.selectedRulesState[s].counter>=this.selectedRulesState[s].shouldBe[0]&&this.selectedRulesState[s].counter<=this.selectedRulesState[s].shouldBe[1]?(e+=1,this._toggleClass(s,!0)):this._toggleClass(s,!1):this.selectedRulesState[s].counter>=this.selectedRulesState[s].shouldBe?(e+=1,this._toggleClass(s,!0)):this._toggleClass(s,!1);this._isValid=e===t}},{key:"_toggleClass",value:function(e,t){var s=this.domElements[e];t?s.classList.add("R6PasswordHint-ok"):s.classList.remove("R6PasswordHint-ok")}},{key:"isValid",value:function(){return this._isValid}}]),t}();